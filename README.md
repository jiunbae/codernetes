# Codex Super Client (Prototype)

이 프로젝트는 소규모 팀을 위한 Codex 마스터/노드 메시지 허브 프로토타입입니다. 초기 목표는 마스터 프로세스가 여러 노드와 WebSocket으로 연결되어 간단한 텍스트 명령을 주고받을 수 있도록 하는 것입니다.

## 기본 구조

- `master`: 중앙 메시지 허브. 노드 연결을 관리하고 들어온 메시지를 브로드캐스트합니다.
- `node`: 마스터에 연결하는 예제 노드. 텍스트를 전송하고 마스터 및 다른 노드로부터 메시지를 수신합니다.

## 기술 선택 (초기 버전)

- 언어: Python 3.11+
- 통신: WebSocket (`websockets` 라이브러리 활용)
- 실행: 단일 호스트 혹은 Docker Compose 기반 실행을 우선 지원

## 개발 계획

1. 마스터 서버 최소 기능 구현
   - 노드 연결/해제 로깅
   - 메시지 브로드캐스트 (송신자 제외)
2. 노드 예제 구현
   - CLI에서 메시지 입력 후 송신
   - 수신 메시지 표준 출력
3. 향후 작업
   - 인증 토큰 추가
   - 작업 큐/상태 저장 통합
   - Slack/Telegram 명령과 매핑

## 빠른 시작

```bash
uv sync
source .venv/bin/activate  # 선택 사항: uv run 명령으로도 실행 가능

uv run python -m master.server --host 0.0.0.0 --port 8765 --http-port 8080
uv run python -m node.client --host 127.0.0.1 --port 8765
```

- 첫 번째 터미널에서 마스터 서버를 실행한 뒤, 별도 터미널에서 노드 클라이언트를 실행하세요.
- 클라이언트 콘솔에 입력한 텍스트는 연결된 다른 노드(또는 향후 메신저 연동)로 브로드캐스트됩니다.
- 브라우저에서 `http://<호스트>:8080`을 열면 현재 연결된 노드 수 확인과 함께, 웹 폼을 통해 모든 노드에 브로드캐스트하거나 목록에서 특정 노드 ID 옆 입력창을 사용해 개별 노드로 직접 메시지를 보낼 수 있습니다. 마스터는 기본적으로 15초마다 각 노드를 ping 하여 상태(`온라인/응답 없음`)와 최근 활동 시각을 갱신해 UI에 반영합니다. `--http-host`를 생략하면 `--host` 값과 동일한 주소로 바인딩되며, 별도 지정 시 외부 접근 범위를 조절할 수 있습니다.
